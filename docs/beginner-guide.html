<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개발자 커뮤니티 플랫폼 - 초보자 가이드</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: #333;
            background: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 60px 20px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .section {
            background: white;
            margin-bottom: 30px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        .section-header {
            background: linear-gradient(135deg, #4338ca 0%, #6366f1 100%);
            color: white;
            padding: 25px 30px;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-content {
            padding: 30px;
        }

        .section-content h3 {
            color: #4338ca;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #e0e7ff;
            padding-bottom: 10px;
        }

        .section-content h4 {
            color: #1f2937;
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            margin: 20px 0;
            overflow-x: auto;
            border-left: 4px solid #3b82f6;
        }

        .warning {
            background: #fef3cd;
            border: 1px solid #f6cc50;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .warning-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-title {
            font-weight: 600;
            color: #1d4ed8;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .success {
            background: #d1fae5;
            border: 1px solid #86efac;
            border-left: 4px solid #10b981;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success-title {
            font-weight: 600;
            color: #047857;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .flow-diagram {
            background: #f1f5f9;
            border: 2px solid #cbd5e1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            background: white;
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 25px;
            border: 2px solid #4f46e5;
            position: relative;
            color: #4f46e5;
            font-weight: 600;
        }

        .flow-step::after {
            content: '→';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #4f46e5;
        }

        .flow-step:last-child::after {
            display: none;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .table th,
        .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .table th {
            background: #4f46e5;
            color: white;
            font-weight: 600;
        }

        .table tr:nth-child(even) {
            background: #f9fafb;
        }

        .table tr:hover {
            background: #f3f4f6;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .emoji {
            font-size: 1.5rem;
        }

        .highlight {
            background: #fbbf24;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .toc {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #4338ca;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 12px;
        }

        .toc a {
            color: #4338ca;
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .toc a:hover {
            background: #e0e7ff;
        }

        .footer {
            text-align: center;
            padding: 40px;
            color: #6b7280;
            border-top: 1px solid #e5e7eb;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 개발자 커뮤니티 플랫폼 비기너 가이드</h1>
            <p>🤖 AI를 활용하는 초보 개발자를 위한 실전 가이드 - "이걸 AI에게 어떻게 물어봐야 하지?" 할 때 보세요!</p>
        </div>

        <div class="toc">
            <h3>📋 목차</h3>
            <ul>
                <li><a href="#overview">🏗️ 프로젝트 전체 구조 이해하기</a></li>
                <li><a href="#database">🗄️ 데이터베이스 설계와 관리</a></li>
                <li><a href="#types">📋 TypeScript 타입 시스템 활용하기</a></li>
                <li><a href="#communication">🔄 프론트엔드-백엔드 통신 이해</a></li>
                <li><a href="#id-importance">🔑 UUID와 ID 관리의 중요성</a></li>
                <li><a href="#debugging">🐛 효과적인 디버깅 방법</a></li>
                <li><a href="#missing-features">⚠️ 누락된 기능 점검과 구현</a></li>
                <li><a href="#setup">⚙️ 개발 환경 세팅 가이드</a></li>
                <li><a href="#common-errors">❗ 자주 발생하는 에럼 해결법</a></li>
            </ul>
        </div>

        <section id="overview" class="section">
            <div class="section-header">
                <span class="emoji">🏗️</span>
                프로젝트 전체 구조 이해하기
            </div>
            <div class="section-content">
                <h3>🎯 우리 프로젝트는 무엇인가?</h3>
                <p>개발자들이 지식을 공유하고 소규모 커뮤니티를 운영할 수 있는 <strong>완성된 풀스택 플랫폼</strong>입니다.</p>
                
                <h4>📚 주요 기능 (실제 구현된 기능 기준)</h4>
                <ul>
                    <li><strong>공식게시판</strong> - 개발 지식 공유 (관리자 승인 필요)</li>
                    <li><strong>자유게시판</strong> - 자유로운 소통 공간 (즉시 게시)</li>
                    <li><strong>커뮤니티</strong> - 소규모 그룹 채팅, 메모, 파일 공유</li>
                    <li><strong>통합 검색</strong> - 모든 게시글 검색 기능</li>
                    <li><strong>관리자 시스템</strong> - 게시글 승인, 통계 관리</li>
                </ul>

                <h4>🏛️ 아키텍처 구조</h4>
                <div class="flow-diagram">
                    <div class="flow-step">사용자 (브라우저)</div>
                    <div class="flow-step">Next.js 프론트엔드</div>
                    <div class="flow-step">API 라우트</div>
                    <div class="flow-step">Supabase 데이터베이스</div>
                </div>

                <h4>📁 폴더 구조 - AI에게 "특정 기능이 어디 있는지" 물어볼 때 참고하세요!</h4>
                <div class="code-block">
<pre><code>src/
├── app/                    # Next.js 15 App Router
│   ├── page.tsx           # 🏠 메인 페이지 
│   ├── knowledge/         # 📚 지식공유 페이지들
│   ├── forum/             # 💬 자유게시판 페이지들  
│   ├── communities/       # 👥 커뮤니티 페이지들
│   ├── search/            # 🔍 통합 검색 페이지
│   ├── admin/             # 👑 관리자 페이지들
│   └── api/               # 🔌 백엔드 API (40개+ 엔드포인트)
├── components/            # 🧩 재사용 가능한 UI 컴포넌트
│   ├── ui/               # 기본 UI (버튼, 카드, 폼)
│   ├── community/        # 커뮤니티 전용 컴포넌트
│   └── board/            # 게시판 전용 컴포넌트
├── hooks/                 # 🎣 React Query API 훅들
├── types/                 # 📋 TypeScript 타입 정의
├── lib/                   # 🛠️ 유틸리티, Supabase 설정
└── middleware.ts          # 🔒 인증 미들웨어
</code></pre>
                </div>

                <div class="info">
                    <div class="info-title">💡 핵심 포인트</div>
                    <p><strong>Next.js 15 App Router</strong>를 사용하여 파일 기반 라우팅을 구현했습니다. <code>app/</code> 폴더의 구조가 그대로 URL이 됩니다.</p>
                </div>
            </div>
        </section>

        <section id="database" class="section">
            <div class="section-header">
                <span class="emoji">🗄️</span>
                데이터베이스 설계와 관리
            </div>
            <div class="section-content">
                <h3>🚨 마이그레이션 실행 상태 확인</h3>
                
                <div class="success">
                    <div class="success-title">✅ 현재 상태</div>
                    <p>로컬 Supabase가 실행 중입니다! (http://127.0.0.1:54323)</p>
                </div>

                <h4>🔍 마이그레이션 실행 여부 확인 방법</h4>
                <div class="code-block">
<pre><code># 1. Supabase Studio 열기
http://127.0.0.1:54323

# 2. 왼쪽 메뉴에서 "Table Editor" 클릭

# 3. 테이블 목록 확인:
# ✅ 있어야 할 테이블들:
# - profiles (사용자 프로필)
# - board_types (게시판 종류) 
# - categories (카테고리)
# - posts (게시글)
# - post_comments (댓글)
# - communities (커뮤니티)
# - community_messages (채팅)

# 4. 만약 테이블이 없거나 적으면 실행 필요:
npx supabase db reset
</code></pre>
                </div>

                <div class="warning">
                    <div class="warning-title">⚠️ 중요한 구분</div>
                    <ul>
                        <li><strong>마이그레이션</strong> = 테이블 구조 생성 (supabase/migrations/)</li>
                        <li><strong>시드</strong> = 초기 데이터 입력 (supabase/seed.sql)</li>
                        <li><code>npx supabase db reset</code> = 둘 다 한번에 실행</li>
                    </ul>
                </div>

                <h4>📊 데이터베이스 구조</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th>테이블</th>
                            <th>역할</th>
                            <th>주요 컬럼</th>
                            <th>관계</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>profiles</code></td>
                            <td>사용자 프로필</td>
                            <td>username, display_name, role</td>
                            <td>auth.users와 연결</td>
                        </tr>
                        <tr>
                            <td><code>board_types</code></td>
                            <td>게시판 종류</td>
                            <td>name, slug, requires_approval</td>
                            <td>categories의 부모</td>
                        </tr>
                        <tr>
                            <td><code>posts</code></td>
                            <td>게시글</td>
                            <td>title, content, status, like_count</td>
                            <td>author → profiles</td>
                        </tr>
                        <tr>
                            <td><code>post_comments</code></td>
                            <td>댓글</td>
                            <td>content, parent_id, like_count</td>
                            <td>post_id → posts</td>
                        </tr>
                        <tr>
                            <td><code>post_likes</code></td>
                            <td>게시글 좋아요</td>
                            <td>post_id, user_id</td>
                            <td>다대다 관계</td>
                        </tr>
                        <tr>
                            <td><code>communities</code></td>
                            <td>커뮤니티</td>
                            <td>name, description, visibility</td>
                            <td>created_by → profiles</td>
                        </tr>
                    </tbody>
                </table>

                <h4>🔄 승인 워크플로우</h4>
                <div class="flow-diagram">
                    <div class="flow-step">작성 (draft)</div>
                    <div class="flow-step">제출 (pending)</div>
                    <div class="flow-step">관리자 검토</div>
                    <div class="flow-step">승인/거부</div>
                </div>

                <div class="info">
                    <div class="info-title">💡 마이그레이션이 필요한 경우</div>
                    <ul>
                        <li>테이블이 전혀 없는 경우</li>
                        <li>스키마가 코드와 맞지 않는 경우</li>
                        <li>새로운 컬럼이나 테이블을 추가한 경우</li>
                        <li>데이터베이스를 완전히 초기화하고 싶은 경우</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="types" class="section">
            <div class="section-header">
                <span class="emoji">📋</span>
                TypeScript 타입 시스템 활용하기
            </div>
            <div class="section-content">
                <h3>🤔 types/ 폴더에 여러 파일이 있는 이유</h3>
                
                <div class="warning">
                    <div class="warning-title">⚠️ 중요한 구분</div>
                    <ul>
                        <li><code>database.types.ts</code> = Supabase가 <strong>자동 생성</strong>한 파일</li>
                        <li>나머지 파일들 = 우리가 <strong>추가로 만든</strong> 사용자 정의 타입</li>
                    </ul>
                </div>

                <h4>📄 각 파일의 역할</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th>파일명</th>
                            <th>역할</th>
                            <th>예시</th>
                            <th>사용 위치</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>database.types.ts</code></td>
                            <td>Supabase 자동 생성 타입</td>
                            <td>테이블 구조, ENUM</td>
                            <td>API 라우트</td>
                        </tr>
                        <tr>
                            <td><code>post.ts</code></td>
                            <td>게시글 관련 타입</td>
                            <td>Post, Comment, Author</td>
                            <td>게시글 페이지들</td>
                        </tr>
                        <tr>
                            <td><code>community.ts</code></td>
                            <td>커뮤니티 관련 타입</td>
                            <td>Community, Message</td>
                            <td>커뮤니티 페이지들</td>
                        </tr>
                        <tr>
                            <td><code>auth.ts</code></td>
                            <td>인증 관련 타입</td>
                            <td>User, LoginInput</td>
                            <td>로그인, 회원가입</td>
                        </tr>
                        <tr>
                            <td><code>admin.ts</code></td>
                            <td>관리자 관련 타입</td>
                            <td>AdminStats</td>
                            <td>관리자 페이지들</td>
                        </tr>
                    </tbody>
                </table>

                <h4>🔗 타입들이 연결되는 방식</h4>
                <div class="code-block">
<pre><code>// post.ts에서 database.types.ts 사용 예시
import type { Database } from './database.types'

// 데이터베이스 ENUM을 가져와서 별칭 만들기
export type PostStatus = Database['public']['Enums']['post_status']

// 사용자 정의 인터페이스에서 DB 타입 활용
export interface Post {
  id: string
  title: string
  status: PostStatus  // ← 여기서 DB ENUM 사용
  author: Author      // ← 별도로 정의한 타입
}
                </div>

                <h4>🎯 왜 이렇게 나누었을까?</h4>
                <ul>
                    <li><strong>코드 조직화</strong> - 관련된 타입끼리 모아서 관리</li>
                    <li><strong>재사용성</strong> - 필요한 타입만 import 해서 사용</li>
                    <li><strong>유지보수</strong> - 수정할 때 관련 파일만 찾으면 됨</li>
                    <li><strong>자동완성</strong> - IDE에서 더 정확한 타입 제안</li>
                    <li><strong>컴파일 속도</strong> - 필요한 타입만 로드하여 빠른 빌드</li>
                </ul>

                <div class="info">
                    <div class="info-title">💡 실제 사용 예시</div>
                    <div class="code-block">
<pre><code>// 게시글 페이지에서
import { Post, PostFilters } from '@/types/post'
import { User } from '@/types/auth'

// 커뮤니티 페이지에서
import { Community, CommunityMember } from '@/types/community'

// API 라우트에서 (Raw DB 타입 필요)
import { Database } from '@/types/database.types'
</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <section id="communication" class="section">
            <div class="section-header">
                <span class="emoji">🔄</span>
                프론트엔드-백엔드 통신 이해
            </div>
            <div class="section-content">
                <h3>🎯 통신 구조 이해하기</h3>
                
                <div class="flow-diagram">
                    <div class="flow-step">페이지 컴포넌트</div>
                    <div class="flow-step">React Query 훅</div>
                    <div class="flow-step">API 클라이언트</div>
                    <div class="flow-step">Next.js API 라우트</div>
                    <div class="flow-step">Supabase 데이터베이스</div>
                </div>

                <h4>📱 실제 동작 예시 - 게시글 조회</h4>

                <div class="code-block">
<pre><code>// 1. 페이지 컴포넌트에서 훅 사용
// src/app/knowledge/page.tsx
function KnowledgePage() {
  const { data: posts } = usePosts({ board_type: 'knowledge' })
  
  return (
    <div>
      {posts?.map(post => (
        <PostCard key={post.id} post={post} />
      ))}
    </div>
  )
}

// 2. React Query 훅
// src/hooks/api/posts.ts  
export function usePosts(filters: PostFilters = {}) {
  return useQuery({
    queryKey: ['posts', filters],
    queryFn: () => apiClient.get<Post[]>('/posts', filters)
  })
}

// 3. API 클라이언트가 호출
// 실제 요청: GET /api/posts?board_type=knowledge

// 4. Next.js API 라우트에서 처리
// src/app/api/posts/route.ts
export async function GET(request: NextRequest) {
  const { searchParams } = new URL(request.url)
  const boardType = searchParams.get('board_type')
  
  // 5. Supabase에서 데이터 조회
  const { data } = await supabase
    .from('posts')
    .select('*')
    .eq('board_type_id', boardType)
  
  return NextResponse.json(data)
}
                </div>

                <h4>🔧 핵심 구성 요소들</h4>

                <h5>1. React Query 훅들 (src/hooks/api/)</h5>
                <ul>
                    <li><code>usePosts()</code> - 게시글 목록 조회</li>
                    <li><code>usePost(id)</code> - 게시글 상세 조회</li>
                    <li><code>useCreatePost()</code> - 게시글 작성</li>
                    <li><code>useCommunities()</code> - 커뮤니티 목록</li>
                </ul>

                <h5>2. API 엔드포인트들 (src/app/api/)</h5>
                <ul>
                    <li><code>/api/posts</code> - 게시글 CRUD</li>
                    <li><code>/api/posts/[id]</code> - 특정 게시글 조작</li>
                    <li><code>/api/communities</code> - 커뮤니티 CRUD</li>
                    <li><code>/api/auth/me</code> - 현재 사용자 정보</li>
                </ul>

                <h4>🎭 상태 관리 방식</h4>
                <div class="info">
                    <div class="info-title">💡 React Query의 역할</div>
                    <p>서버 상태를 캐싱하고 자동으로 동기화해줍니다. 즉, 한 번 불러온 데이터는 캐시에 저장되어 다시 요청할 때 빠르게 응답합니다.</p>
                </div>
            </div>
        </section>

        <section id="id-importance" class="section">
            <div class="section-header">
                <span class="emoji">🔑</span>
                UUID와 ID 관리의 중요성
            </div>
            <div class="section-content">
                <h3>❗ ID가 틀리면 무엇이 문제가 될까?</h3>

                <div class="warning">
                    <div class="warning-title">⚠️ 심각한 문제들</div>
                    <ul>
                        <li><strong>데이터 조회 실패</strong> - 잘못된 ID로는 아무것도 찾을 수 없음</li>
                        <li><strong>관계 데이터 오류</strong> - 댓글이 엉뚱한 게시글에 연결됨</li>
                        <li><strong>권한 문제</strong> - 다른 사람의 데이터를 수정하게 됨</li>
                        <li><strong>외래키 제약 위반</strong> - 데이터베이스 에러 발생</li>
                    </ul>
                </div>

                <h4>🔍 ID의 역할과 중요성</h4>

                <h5>1. 기본키 (Primary Key) 역할</h5>
                <div class="code-block">
// 게시글 테이블 구조
CREATE TABLE posts (
    id UUID PRIMARY KEY,        -- ← 이것이 기본키!
    title TEXT NOT NULL,
    author_id UUID REFERENCES profiles(id)  -- ← 외래키
);

// 잘못된 ID 사용 시
const wrongId = "123-wrong-id"
const post = await supabase
    .from('posts')
    .select('*')
    .eq('id', wrongId)  // ← 결과: 빈 배열 []

// 올바른 ID 사용 시  
const correctId = "550e8400-e29b-41d4-a716-446655440000"
const post = await supabase
    .from('posts')
    .select('*')
    .eq('id', correctId)  // ← 결과: 게시글 데이터
                </div>

                <h5>2. 외래키 (Foreign Key) 관계</h5>
                <div class="code-block">
// 댓글 작성 시
const comment = {
    post_id: "올바른-게시글-ID",     // ← 반드시 존재하는 게시글 ID
    author_id: "올바른-사용자-ID",   // ← 반드시 존재하는 사용자 ID  
    content: "댓글 내용"
}

// 만약 post_id가 틀렸다면?
// ❌ 에러: Foreign key constraint violation
                </div>

                <h5>3. URL 파라미터와 ID</h5>
                <div class="code-block">
// URL: /posts/550e8400-e29b-41d4-a716-446655440000
// 페이지 컴포넌트에서
function PostDetail({ params }) {
    const { data: post } = usePost(params.id)  // ← URL의 ID 사용
    
    if (!post) {
        return <div>게시글을 찾을 수 없습니다</div>  // ← ID가 틀렸을 때
    }
    
    return <div>{post.title}</div>
}
                </div>

                <h4>🛡️ ID 검증 방법</h4>
                <ul>
                    <li><strong>UUID 형식 확인</strong> - 36자리 하이픈 포함 형식</li>
                    <li><strong>데이터베이스 존재 확인</strong> - 실제로 존재하는 ID인지</li>
                    <li><strong>권한 확인</strong> - 현재 사용자가 접근할 수 있는 데이터인지</li>
                    <li><strong>타입 검증</strong> - TypeScript로 컴파일 타임 검증</li>
                </ul>

                <div class="success">
                    <div class="success-title">✅ 좋은 습관</div>
                    <ul>
                        <li>ID를 복사/붙여넣기 할 때 전체를 정확히 복사하기</li>
                        <li>개발자 도구 Network 탭에서 실제 요청된 ID 확인하기</li>
                        <li>Supabase Studio에서 데이터 직접 확인하기</li>
                        <li>TypeScript 에러 메시지 꼼꼼히 읽기</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="debugging" class="section">
            <div class="section-header">
                <span class="emoji">🐛</span>
                효과적인 디버깅 방법
            </div>
            <div class="section-content">
                <h3>🎯 문제를 찾는 체계적 방법</h3>

                <div class="info">
                    <div class="info-title">💡 디버깅의 핵심</div>
                    <p><strong>"증상 → 원인 → 해결"</strong> 순서로 접근하세요. 급하게 코드를 수정하지 말고, 먼저 문제의 정확한 원인을 파악하는 것이 중요합니다.</p>
                </div>

                <h4>🔍 1단계: 문제 상황 파악</h4>
                
                <h5>브라우저 개발자 도구 활용</h5>
                <div class="code-block">
// 개발자 도구 단축키: F12 또는 Ctrl+Shift+I

// 1. Console 탭 - 에러 메시지 확인
console.error()  // 빨간색 에러 메시지
console.warn()   // 노란색 경고 메시지
console.log()    // 일반 로그

// 2. Network 탭 - API 요청 확인
// - 요청 URL이 올바른가?
// - 응답 상태코드는? (200 = 성공, 404 = 없음, 500 = 서버 에러)
// - 요청/응답 데이터가 예상과 같은가?

// 3. Sources 탭 - 브레이크포인트 설정
// 특정 줄에서 코드 실행을 멈추고 변수값 확인
                </div>

                <h5>자주 확인해야 할 것들</h5>
                <ul>
                    <li><strong>콘솔 에러</strong> - 빨간색으로 표시되는 JavaScript 에러</li>
                    <li><strong>404 에러</strong> - API 엔드포인트를 찾을 수 없음</li>
                    <li><strong>500 에러</strong> - 서버 내부 에러</li>
                    <li><strong>타입 에러</strong> - TypeScript 타입 불일치</li>
                    <li><strong>null/undefined</strong> - 예상한 데이터가 없음</li>
                </ul>

                <h4>🔧 2단계: 원인 분석</h4>
                
                <h5>계층별 디버깅 접근법</h5>
                <div class="flow-diagram">
                    <div class="flow-step">🎨 UI 렌더링</div>
                    <div class="flow-step">📊 데이터 상태</div>
                    <div class="flow-step">🌐 API 통신</div>
                    <div class="flow-step">🗄️ 데이터베이스</div>
                </div>

                <div class="code-block">
// 각 계층별 디버깅 방법

// 1. UI 렌더링 문제
console.log('컴포넌트 렌더링:', { props, state })

// 2. 데이터 상태 문제  
console.log('React Query 상태:', { data, isLoading, error })

// 3. API 통신 문제
console.log('API 요청:', { url, method, params })
console.log('API 응답:', { status, data })

// 4. 데이터베이스 문제
// Supabase Studio에서 직접 쿼리 실행해보기
                </div>

                <h4>🛠️ 디버깅 도구들</h4>
                <ul>
                    <li><strong>React Developer Tools</strong> - 컴포넌트 상태 확인</li>
                    <li><strong>React Query Devtools</strong> - 쿼리 상태 확인</li>
                    <li><strong>Supabase Studio</strong> - 데이터베이스 직접 확인</li>
                    <li><strong>VSCode Debugger</strong> - 브레이크포인트로 단계별 실행</li>
                    <li><strong>Console.log</strong> - 가장 기본적이지만 효과적</li>
                </ul>

                <div class="success">
                    <div class="success-title">✅ 효과적인 디버깅 습관</div>
                    <ul>
                        <li>에러 메시지를 <strong>정확히</strong> 읽기</li>
                        <li>한 번에 하나씩 변경하고 테스트하기</li>
                        <li>문제를 <strong>최소 단위</strong>로 축소하기</li>
                        <li>Stack Overflow 검색 시 <strong>정확한 에러 메시지</strong> 사용</li>
                        <li>해결 후 <strong>왜 문제가 발생했는지</strong> 이해하기</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="missing-features" class="section">
            <div class="section-header">
                <span class="emoji">⚠️</span>
                누락된 기능 점검과 구현
            </div>
            <div class="section-content">
                <h3>🔍 현재 구현 상태 점검</h3>

                <div class="info">
                    <div class="info-title">💡 점검 방법</div>
                    <p>데이터베이스에는 테이블이 있지만 프론트엔드 페이지에서 실제로 작동하지 않는 기능들을 찾아보겠습니다.</p>
                </div>

                <h4>❗ 확인이 필요한 기능들</h4>

                <table class="table">
                    <thead>
                        <tr>
                            <th>기능</th>
                            <th>데이터베이스</th>
                            <th>API</th>
                            <th>프론트엔드</th>
                            <th>우선순위</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>댓글 좋아요</td>
                            <td>✅ comment_likes</td>
                            <td>❓ 확인 필요</td>
                            <td>❓ 확인 필요</td>
                            <td>높음</td>
                        </tr>
                        <tr>
                            <td>게시글 북마크</td>
                            <td>✅ post_bookmarks</td>
                            <td>❓ 확인 필요</td>
                            <td>❓ 확인 필요</td>
                            <td>중간</td>
                        </tr>
                        <tr>
                            <td>게시글 첨부파일</td>
                            <td>✅ post_attachments</td>
                            <td>❓ 확인 필요</td>
                            <td>❓ 확인 필요</td>
                            <td>낮음</td>
                        </tr>
                        <tr>
                            <td>알림 시스템</td>
                            <td>✅ notifications</td>
                            <td>❓ 확인 필요</td>
                            <td>❓ 확인 필요</td>
                            <td>중간</td>
                        </tr>
                        <tr>
                            <td>커뮤니티 게시글</td>
                            <td>✅ community_posts</td>
                            <td>✅ 있음</td>
                            <td>❓ 부분 구현</td>
                            <td>높음</td>
                        </tr>
                    </tbody>
                </table>

                <h4>🔧 기능별 구현 가이드</h4>

                <h5>1. 댓글 좋아요 기능</h5>
                <div class="code-block">
<pre><code>// 1. API 엔드포인트 생성 (src/app/api/comments/[id]/like/route.ts)
export async function POST(request: NextRequest, { params }) {
  const { id } = await params
  const { data: { user } } = await supabase.auth.getUser()
  
  const { error } = await supabase
    .from('comment_likes')
    .insert({ comment_id: id, user_id: user.id })
  
  if (error) {
    return NextResponse.json({ error: error.message }, { status: 400 })
  }
  
  return NextResponse.json({ success: true })
}

// 2. React Query 훅 생성 (src/hooks/api/comments.ts)
export function useLikeComment() {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: (commentId: string) => 
      apiClient.post(`/comments/${commentId}/like`),
    onSuccess: () => {
      queryClient.invalidateQueries(['comments'])
    }
  })
}

// 3. 컴포넌트에서 사용
function CommentItem({ comment }) {
  const likeMutation = useLikeComment()
  
  return (
    &lt;div&gt;
      &lt;p&gt;{comment.content}&lt;/p&gt;
      &lt;button onClick={() =&gt; likeMutation.mutate(comment.id)}&gt;
        👍 {comment.like_count}
      &lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre>
                </div>

                <div class="success">
                    <div class="success-title">✅ 1단계 (필수): 댓글 좋아요</div>
                    <p>사용자들이 가장 많이 사용하는 기능이므로 먼저 구현</p>
                </div>

                <div class="info">
                    <div class="info-title">💡 2단계 (중요): 알림 시스템</div>
                    <p>사용자 참여도를 높이는 중요한 기능</p>
                </div>

                <div class="warning">
                    <div class="warning-title">⚠️ 3단계 (선택): 첨부파일</div>
                    <p>구현이 복잡하므로 기본 기능이 안정화된 후 추가</p>
                </div>
            </div>
        </section>

        <section id="setup" class="section">
            <div class="section-header">
                <span class="emoji">⚙️</span>
                개발 환경 세팅 가이드
            </div>
            <div class="section-content">
                <h3>🚀 프로젝트 실행하기</h3>

                <h4>📋 현재 상태 확인</h4>
                <div class="success">
                    <div class="success-title">✅ 현재 준비된 것들</div>
                    <ul>
                        <li>로컬 Supabase 실행 중 (http://127.0.0.1:54323)</li>
                        <li>마이그레이션 파일 준비됨</li>
                        <li>시드 데이터 준비됨</li>
                        <li>프로젝트 코드 완성됨</li>
                    </ul>
                </div>

                <h4>🔧 단계별 설정</h4>

                <h5>1단계: 마이그레이션 실행 확인</h5>
                <div class="code-block">
# Supabase Studio에서 테이블 확인
http://127.0.0.1:54323

# 만약 테이블이 없다면 마이그레이션 실행
npx supabase db reset
# 이 명령은 다음을 실행합니다:
# 1. 기존 데이터베이스 삭제
# 2. 마이그레이션 실행 (테이블 생성)
# 3. 시드 데이터 입력 (초기 게시판, 카테고리 등)
</code></pre>
                </div>

                <h5>2단계: 환경 변수 설정</h5>
                <div class="code-block">
# .env.local 파일 확인/수정
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=[npx supabase status에서 확인된 anon key]

# 주의: 실제 키는 'npx supabase status' 명령어로 확인하세요
                </div>

                <h5>3단계: 개발 서버 실행</h5>
                <div class="code-block">
# 패키지 설치 (필요시)
npm install

# 개발 서버 시작
npm run dev

# 브라우저에서 확인
http://localhost:3000
                </div>

                <h4>🧪 정상 작동 확인 방법</h4>
                <ol>
                    <li><strong>메인 페이지</strong> - 게시글 목록이 표시되는가?</li>
                    <li><strong>로그인</strong> - 회원가입/로그인이 작동하는가?</li>
                    <li><strong>글쓰기</strong> - 새 게시글을 작성할 수 있는가?</li>
                    <li><strong>커뮤니티</strong> - 커뮤니티 목록이 표시되는가?</li>
                    <li><strong>검색</strong> - 통합 검색이 작동하는가?</li>
                </ol>

                <div class="warning">
                    <div class="warning-title">⚠️ 문제 발생 시 체크리스트</div>
                    <ol>
                        <li>브라우저 콘솔에서 에러 메시지 확인</li>
                        <li>Supabase가 실행 중인지 확인 (npx supabase status)</li>
                        <li>마이그레이션이 실행되었는지 확인 (Studio에서 테이블 확인)</li>
                        <li>환경 변수 값 재확인</li>
                        <li>포트 충돌 확인 (3000번 포트가 사용 중인지)</li>
                    </ol>
                </div>
            </div>
        </section>

        <section id="common-errors" class="section">
            <div class="section-header">
                <span class="emoji">❗</span>
                자주 발생하는 에러 해결법
            </div>
            <div class="section-content">
                <h3>🔥 실전에서 자주 발생하는 에러</h3>

                <h4>1. TypeScript 타입 에러 해결하기</h4>
                <div class="warning">
                    <div class="warning-title">⚠️ Property 'xxx' does not exist on type 'yyy'</div>
                    <div class="code-block">
// 문제 상황
const post = await fetchPost()
console.log(post.author.name)  // ❌ 에러 발생!

// 원인: post나 author가 undefined일 수 있음

// 해결 방법 1: Optional chaining 사용
console.log(post?.author?.name)

// 해결 방법 2: 타입 가드 사용
if (post && post.author) {
  console.log(post.author.name)
}

// 해결 방법 3: 기본값 설정하기
const authorName = post?.author?.name || '알 수 없음'
                    </div>
                </div>

                <h4>2. React Query 에러 처리 방법</h4>
                <div class="warning">
                    <div class="warning-title">⚠️ Cannot read property of undefined (React Query)</div>
                    <div class="code-block">
// 문제 상황
const { data: posts } = usePosts()
return posts.map(post => ...)  // ❌ posts가 undefined일 수 있음!

// 해결 방법: 로딩 상태와 에러 처리
const { data: posts, isLoading, error } = usePosts()

if (isLoading) return <div>로딩 중...</div>
if (error) return <div>에러 발생: {error.message}</div>
if (!posts) return <div>데이터가 없습니다</div>

return posts.map(post => ...)  // ✅ 안전함
                    </div>
                </div>

                <h4>3. API 경로 에러 해결하기</h4>
                <div class="warning">
                    <div class="warning-title">⚠️ 404 Not Found</div>
                    <div class="code-block">
// 문제 상황: API 경로 오타
fetch('/api/post/123')  // ❌

// 해결을 위한 확인 방법
// 1. src/app/api/ 폴더 구조 확인
// 2. 실제 파일 경로와 URL 비교

// 올바른 경로
fetch('/api/posts/123')  // ✅

// 동적 경로 확인
// /api/posts/[id]/route.ts → /api/posts/123
// /api/communities/[id]/messages/route.ts → /api/communities/abc/messages
                    </div>
                </div>

                <h4>4. 데이터베이스 제약 위반</h4>
                <div class="warning">
                    <div class="warning-title">⚠️ Foreign key constraint violation</div>
                    <div class="code-block">
// 문제: 존재하지 않는 ID 참조
const comment = {
  post_id: "틀린-ID",  // ❌ 존재하지 않는 게시글 ID
  content: "댓글"
}

// 해결: 올바른 ID 사용
const comment = {
  post_id: post.id,  // ✅ 실제 게시글의 ID
  content: "댓글"  
}

// 디버깅: Supabase Studio에서 데이터 확인
// 1. posts 테이블에서 ID 복사
// 2. 정확한 UUID 형식 확인 
                    </div>
                </div>

                <h4>🛠️ 에러 해결 체크리스트</h4>

                <div class="info">
                    <div class="info-title">💡 순서대로 확인하세요</div>
                    <ol>
                        <li><strong>콘솔 에러 메시지</strong> 정확히 읽기</li>
                        <li><strong>타입 에러</strong>인 경우 undefined 체크</li>
                        <li><strong>API 에러</strong>인 경우 Network 탭 확인</li>
                        <li><strong>데이터베이스 에러</strong>인 경우 Supabase Studio 확인</li>
                        <li><strong>인증 에러</strong>인 경우 로그아웃 후 재로그인</li>
                    </ol>
                </div>

                <h4>🚨 응급 처치 명령어들</h4>
                <div class="code-block">
# 개발 서버 재시작
Ctrl + C (서버 종료)
npm run dev (재시작)

# 캐시 클리어 및 빌드 테스트
npm run build

# 데이터베이스 리셋
npx supabase db reset

# 패키지 재설치 (문제가 지속될 경우)
rm -rf node_modules package-lock.json
npm install
                </div>

                <div class="success">
                    <div class="success-title">✅ 예방 및 좋은 습관</div>
                    <ul>
                        <li><strong>TypeScript 에러</strong>를 무시하지 말고 반드시 해결하기</li>
                        <li><strong>Optional chaining (?.)을 적극 활용하기</li>
                        <li><strong>React Query 로딩 상태</strong> 항상 처리하기</li>
                        <li><strong>ID 복사 시</strong> 전체 문자열 정확히 복사하기</li>
                        <li><strong>에러 발생 시</strong> 개발자 도구 먼저 확인하기</li>
                        <li><strong>코드 변경 후</strong> 반드시 테스트하기</li>
                    </ul>
                </div>
            </div>
        </section>

        <div class="footer">
            <p>🎓 이 가이드가 도움이 되셨나요? 궁금한 점이 있으면 언제든 물어보세요!</p>
            <p>📅 최종 업데이트: 2024년 7월 22일</p>
            <p>🔗 Supabase Studio: <a href="http://127.0.0.1:54323" target="_blank">http://127.0.0.1:54323</a></p>
        </div>
    </div>
</body>
</html>